<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kids Quiz</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    .emoji {
      font-size: 100px;
      margin: 20px 0;
    }
    .options button {
      padding: 10px 20px;
      margin: 8px;
      font-size: 18px;
      cursor: pointer;
    }
    #result {
      font-size: 22px;
      margin-top: 20px;
      padding: 10px;
      background-color: #f0f8ff;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    #feedback {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
    }
    .hidden {
      display: none;
    }

    .start-buttons button {
      font-size: 20px;
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
    }
    /* Form Container Styles (giris.html'den alÄ±ndÄ±) */
    .form-container {
      background-color: rgb(232, 192, 203);
      padding: 20px 25px;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      width: 80%;
      max-width: 300px;
      margin: 20px auto; /* Ortalamak iÃ§in */
      display: none; /* VarsayÄ±lan olarak gizli olacak */
    }

    .form-container h2 {
      text-align: center;
      margin-bottom: 4px;
    }

    .form-container input {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      transition: border 0.3s;
      box-sizing: border-box; /* Padding'in geniÅŸliÄŸi etkilemesini engelle */
    }

    .form-container input:focus {
      border-color: #003366;
      outline: none;
    }

    .form-container button {
      width: 100%;
      padding: 12px;
      background-color: #003366;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .form-container button:hover {
      background-color: #005f73;
    }

    .form-container p {
      text-align: center;
      margin-top: 15px;
    }
    .form-container a {
      color: #003366;
      text-decoration: none;
    }
    .form-container a:hover {
      text-decoration: underline;
    }

    /* Sayfa yÃ¼klendiÄŸinde quiz iÃ§eriÄŸini gizle, formlarÄ± gÃ¶ster veya tersi */
    #quiz-content {
      display: none; /* VarsayÄ±lan olarak quiz iÃ§eriÄŸini gizle */
    }
    #auth-section {
      text-align: center;
      margin-top: 50px;
    }
    #auth-section h2 {
      color: #333;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>

  <header class="header">
      <a href="index.html" style="text-decoration: none; color: black; font-weight: bold;">Anasayfa</a>
  </header>

  <div id="auth-section">
    <h2>Quiz'e EriÅŸmek Ä°Ã§in LÃ¼tfen GiriÅŸ YapÄ±n veya KayÄ±t Olun</h2>

    <div class="form-container" id="register-form">
      <h2>KayÄ±t Ol</h2>
      <form id="registerForm">
        <input type="text" id="fullname" placeholder="Ad Soyad" required>
        <input type="email" id="email" placeholder="E-posta" required>
        <input type="number" id="telefon" placeholder="Telefon" required>
        <input type="password" id="password" placeholder="Åifre" required>
        <button type="submit">KayÄ±t Ol</button>
      </form>
      <p>Zaten Ã¼ye misiniz? <a href="#" id="show-login">GiriÅŸ yap</a></p>
    </div>

    <div class="form-container" id="login-form">
      <h2>GiriÅŸ Yap</h2>
      <form id="loginForm">
        <input type="email" id="login-email" placeholder="E-posta" required>
        <input type="password" id="login-password" placeholder="Åifre" required>
        <button type="submit">GiriÅŸ Yap</button>
      </form>
      <p>HesabÄ±nÄ±z yok mu? <a href="#" id="show-register">KayÄ±t ol</a></p>
    </div>
  </div>


  <div id="quiz-content">
    <h2>ğŸ‰ Kids Quiz: Animals, Colors, Family, Fruits, Vehicles</h2>

    <div id="start-screen">
      <div class="start-buttons">
        <button onclick="startQuiz('Animals')">Animals ğŸ¶</button>
        <button onclick="startQuiz('Colors')">Colors ğŸŒˆ</button>
        <button onclick="startQuiz('Family')">Family ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</button>
        <button onclick="startQuiz('Fruits')">Fruits ğŸ</button>
        <button onclick="startQuiz('Vehicles')">Vehicles ğŸš—</button>
      </div>
    </div>

    <div id="quiz-container" class="hidden"></div>
    <div id="feedback"></div>
    <div id="result"></div>
    <button id="home-button" onclick="goHome()" class="hidden">Anasayfaya DÃ¶n</button>
  </div> <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getFirestore, setDoc, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyA26XLG7jdLhyZ6HyzhuapXON-kCn0jNd4", // Kendi Firebase API anahtarÄ±nÄ±z
      authDomain: "learnenglish-b0777.firebaseapp.com",
      projectId: "learnenglish-b0777",
      storageBucket: "learnenglish-b0777.appspot.com",
      messagingSenderId: "547469954131",
      appId: "1:547469954131:web:1869e9a6c702bffad04aa6",
      measurementId: "G-6F3C3SXK32"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // HTML elementlerini al
    const authSection = document.getElementById('auth-section'); // Yeni eklenen kÄ±sÄ±m
    const registerFormContainer = document.getElementById('register-form');
    const loginFormContainer = document.getElementById('login-form');
    const quizContent = document.getElementById('quiz-content'); // testContent yerine quizContent

    // Oturum durumuna gÃ¶re formlarÄ± veya quizi gÃ¶ster
    onAuthStateChanged(auth, async (user) => {
      if (user) {
        // KullanÄ±cÄ± giriÅŸ yapmÄ±ÅŸsa
        const userDocRef = doc(db, "users", user.uid);
        const userDocSnap = await getDoc(userDocRef);

        if (userDocSnap.exists() && userDocSnap.data().isAdmin) {
          // Admin ise admin sayfasÄ±na yÃ¶nlendir
          window.location.href = "admin.html";
        } else {
          // Admin deÄŸilse veya belge bulunamazsa, quiz iÃ§eriÄŸini gÃ¶ster
          authSection.style.display = 'none'; // Yetkilendirme bÃ¶lÃ¼mÃ¼nÃ¼ gizle
          quizContent.style.display = 'block'; // Quiz iÃ§eriÄŸini gÃ¶ster
        }
      } else {
        // KullanÄ±cÄ± giriÅŸ yapmamÄ±ÅŸsa: GiriÅŸ/KayÄ±t formlarÄ±nÄ± gÃ¶ster
        authSection.style.display = 'block'; // Yetkilendirme bÃ¶lÃ¼mÃ¼nÃ¼ gÃ¶ster
        registerFormContainer.style.display = 'block'; // BaÅŸlangÄ±Ã§ta kayÄ±t formunu gÃ¶ster
        loginFormContainer.style.display = 'none';
        quizContent.style.display = 'none'; // Quiz iÃ§eriÄŸini gizle
      }
    });

    // Formlar arasÄ± geÃ§iÅŸ
    document.getElementById("show-login").addEventListener("click", (e) => {
      e.preventDefault();
      registerFormContainer.style.display = "none";
      loginFormContainer.style.display = "block";
    });

    document.getElementById("show-register").addEventListener("click", (e) => {
      e.preventDefault();
      loginFormContainer.style.display = "none";
      registerFormContainer.style.display = "block";
    });

    // KayÄ±t Formu GÃ¶nderme
    document.getElementById("registerForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const fullname = document.getElementById("fullname").value.trim();
      const email = document.getElementById("email").value.trim();
      const telefon = document.getElementById("telefon").value.trim();
      const password = document.getElementById("password").value;

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;

        await setDoc(doc(db, "users", user.uid), {
          ad: fullname.split(" ")[0] || fullname,
          soyad: fullname.split(" ")[1] || "",
          email: email,
          telefon: telefon,
          isAdmin: false // Yeni kayÄ±t olan kullanÄ±cÄ±lara varsayÄ±lan olarak admin yetkisi verilmedi.
        });

        alert("KayÄ±t baÅŸarÄ±lÄ±! GiriÅŸ yaptÄ±nÄ±z ve quiz'e eriÅŸebilirsiniz.");
        // BaÅŸarÄ±lÄ± kayÄ±ttan sonra quizi gÃ¶ster
        authSection.style.display = 'none';
        quizContent.style.display = 'block';

      } catch (error) {
        alert("KayÄ±t hatasÄ±: " + error.message);
      }
    });

    // GiriÅŸ Formu GÃ¶nderme
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("login-email").value.trim();
      const password = document.getElementById("login-password").value;

      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;

        const userDocRef = doc(db, "users", user.uid);
        const userDocSnap = await getDoc(userDocRef);

        if (userDocSnap.exists()) {
          const userData = userDocSnap.data();
          if (userData.isAdmin) {
            alert("GiriÅŸ baÅŸarÄ±lÄ±. Admin sayfasÄ±na yÃ¶nlendiriliyorsun!");
            window.location.href = "admin.html";
          } else {
            alert("GiriÅŸ baÅŸarÄ±lÄ±. Quiz'e eriÅŸebilirsiniz.");
            // Admin olmayanlar iÃ§in quizi gÃ¶ster
            authSection.style.display = 'none';
            quizContent.style.display = 'block';
          }
        } else {
          // KullanÄ±cÄ± belgesi bulunamazsa (nadiren olur, ama hata yÃ¶netimi iÃ§in)
          alert("GiriÅŸ baÅŸarÄ±lÄ±, ancak kullanÄ±cÄ± bilgileri bulunamadÄ±. Quiz'e eriÅŸebilirsiniz.");
          quizContent.style.display = 'block';
          authSection.style.display = 'none';
        }
      } catch (error) {
        alert("GiriÅŸ hatasÄ±: " + error.message);
      }
    });

  </script>

  <script>
    const quizData = {
      Animals: [
        { emoji: "ğŸ¶", options: ["Cat", "Dog", "Bird"], answer: "Dog" },
        { emoji: "ğŸ¦", options: ["Tiger", "Bear", "Lion"], answer: "Lion" },
        { emoji: "ğŸ˜", options: ["Elephant", "Giraffe", "Monkey"], answer: "Elephant" },
        { emoji: "ğŸ ", options: ["Fish", "Dolphin", "Whale"], answer: "Fish" },
        { emoji: "ğŸ¦‰", options: ["Owl", "Eagle", "Penguin"], answer: "Owl" }
      ],
      Colors: [
        { emoji: "ğŸ”´", options: ["Blue", "Red", "Green"], answer: "Red" },
        { emoji: "ğŸ”µ", options: ["Yellow", "Red", "Blue"], answer: "Blue" },
        { emoji: "ğŸŸ¢", options: ["Green", "Orange", "Purple"], answer: "Green" },
        { emoji: "ğŸŸ¡", options: ["Yellow", "Pink", "Brown"], answer: "Yellow" },
        { emoji: "ğŸŸ£", options: ["Black", "Purple", "White"], answer: "Purple" }
      ],
      Family: [
        { emoji: "ğŸ‘¨", options: ["Mother", "Father", "Sister"], answer: "Father" },
        { emoji: "ğŸ‘©", options: ["Brother", "Mother", "Grandpa"], answer: "Mother" },
        { emoji: "ğŸ‘§", options: ["Son", "Daughter", "Uncle"], answer: "Daughter" },
        { emoji: "ğŸ‘¦", options: ["Girl", "Boy", "Baby"], answer: "Boy" },
        { emoji: "ğŸ‘´", options: ["Grandma", "Grandpa", "Aunt"], answer: "Grandpa" }
      ],
      Fruits: [
        { emoji: "ğŸ", options: ["Banana", "Apple", "Grape"], answer: "Apple" },
        { emoji: "ğŸŒ", options: ["Orange", "Banana", "Cherry"], answer: "Banana" },
        { emoji: "ğŸ“", options: ["Kiwi", "Strawberry", "Melon"], answer: "Strawberry" },
        { emoji: "ğŸ‡", options: ["Pear", "Peach", "Grape"], answer: "Grape" },
        { emoji: "ğŸŠ", options: ["Apple", "Orange", "Lemon"], answer: "Orange" }
      ],
      Vehicles: [
        { emoji: "ğŸš—", options: ["Train", "Car", "Bike"], answer: "Car" },
        { emoji: "ğŸšŒ", options: ["Bus", "Truck", "Motorcycle"], answer: "Bus" },
        { emoji: "ğŸš²", options: ["Bicycle", "Car", "Bus"], answer: "Bicycle" },
        { emoji: "ğŸš¢", options: ["Boat", "Ship", "Submarine"], answer: "Ship" },
        { emoji: "âœˆï¸", options: ["Helicopter", "Plane", "Rocket"], answer: "Plane" }
      ]
    };

    let questions = [];
    let current = 0;
    let score = 0;

    function startQuiz(category) {
      questions = quizData[category];
      current = 0;
      score = 0;
      document.getElementById("start-screen").classList.add("hidden");
      document.getElementById("quiz-container").classList.remove("hidden");
      document.getElementById("home-button").classList.add("hidden"); // Quiz baÅŸladÄ±ÄŸÄ±nda Anasayfa dÃ¼ÄŸmesini gizle
      document.getElementById("result").textContent = "";
      document.getElementById("feedback").textContent = "";
      showQuestion();
    }

    function showQuestion() {
      if (current >= questions.length) {
        document.getElementById("quiz-container").innerHTML = "";
        document.getElementById("feedback").textContent = "";
        document.getElementById("result").textContent = `ğŸ‰ Quiz tamamlandÄ±! PuanÄ±nÄ±z: ${score}/${questions.length}`;
        document.getElementById("home-button").classList.remove("hidden"); // Quiz bitince Anasayfa dÃ¼ÄŸmesini gÃ¶ster
        return;
      }

      const q = questions[current];
      const container = document.getElementById("quiz-container");
      container.innerHTML = `
        <div class="emoji">${q.emoji}</div>
        <div class="options">
          ${q.options.map(opt => `<button onclick="checkAnswer('${opt}')">${opt}</button>`).join('')}
        </div>
      `;
    }

    function checkAnswer(selected) {
      const correct = questions[current].answer;
      if (selected === correct) {
        score++;
        document.getElementById("feedback").textContent = "âœ… DoÄŸru!";
      } else {
        document.getElementById("feedback").textContent = `âŒ YanlÄ±ÅŸ! DoÄŸru cevap: ${correct}`;
      }

      current++;
      setTimeout(() => {
        document.getElementById("feedback").textContent = "";
        showQuestion();
      }, 1000);
    }

    function goHome() {
      document.getElementById('start-screen').classList.remove('hidden');
      document.getElementById('quiz-container').classList.add('hidden');
      document.getElementById('home-button').classList.add('hidden');
      document.getElementById('result').textContent = "";
      document.getElementById('feedback').textContent = "";
    }
  </script>

</body>
</html>